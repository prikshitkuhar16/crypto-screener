{"ast":null,"code":"var _jsxFileName = \"G:\\\\WebD\\\\CryptoBucks-Final-Code\\\\src\\\\context\\\\StorageContext.js\",\n  _s = $RefreshSig$();\n/* eslint-disable react-hooks/exhaustive-deps */\nimport { createContext, useContext, useEffect, useLayoutEffect, useState } from \"react\";\nimport { CryptoContext } from \"./CryptoContext\";\n\n// create context object\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const StorageContext = /*#__PURE__*/createContext({});\n\n// create the provider component\nexport const StorageProvider = ({\n  children\n}) => {\n  _s();\n  const [allCoins, setAllCoins] = useState([]);\n  const [savedData, setSavedData] = useState();\n  let {\n    currency,\n    sortBy\n  } = useContext(CryptoContext);\n  const saveCoin = coinId => {\n    let oldCoins = JSON.parse(localStorage.getItem(\"coins\"));\n    if (oldCoins.includes(coinId)) {\n      return null;\n    } else {\n      let newCoin = [...oldCoins, coinId];\n      setAllCoins(newCoin);\n      localStorage.setItem(\"coins\", JSON.stringify(newCoin));\n    }\n  };\n  const removeCoin = coinId => {\n    let oldCoins = JSON.parse(localStorage.getItem(\"coins\"));\n    let newCoin = oldCoins.filter(coin => coin !== coinId);\n    setAllCoins(newCoin);\n    localStorage.setItem(\"coins\", JSON.stringify(newCoin));\n  };\n  const getSavedData = async (totalCoins = allCoins) => {\n    try {\n      const data = await fetch(`https://api.coingecko.com/api/v3/coins/markets?vs_currency=${currency}&ids=${totalCoins.join(\",\")}&order=${sortBy}&sparkline=false&price_change_percentage=1h%2C24h%2C7d`).then(res => res.json()).then(json => json);\n\n      // console.log(data);\n      setSavedData(data);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const resetSavedResult = () => {\n    getSavedData();\n  };\n  useEffect(() => {\n    if (allCoins.length > 0) {\n      getSavedData(allCoins);\n    } else {\n      setSavedData();\n    }\n  }, [allCoins]);\n  useLayoutEffect(() => {\n    let isThere = JSON.parse(localStorage.getItem(\"coins\")) || false;\n    if (!isThere) {\n      //set the localstorage with empty array\n      localStorage.setItem(\"coins\", JSON.stringify([]));\n    } else {\n      //set the state with the current values from the local storage\n      let totalCoins = JSON.parse(localStorage.getItem(\"coins\"));\n      setAllCoins(totalCoins);\n      if (totalCoins.length > 0) {\n        getSavedData(totalCoins);\n      }\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(StorageContext.Provider, {\n    value: {\n      saveCoin,\n      allCoins,\n      removeCoin,\n      savedData,\n      resetSavedResult\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n};\n_s(StorageProvider, \"W3cCItCx6xjEOqv2bHVTSLrGM+s=\");\n_c = StorageProvider;\nvar _c;\n$RefreshReg$(_c, \"StorageProvider\");","map":{"version":3,"names":["createContext","useContext","useEffect","useLayoutEffect","useState","CryptoContext","jsxDEV","_jsxDEV","StorageContext","StorageProvider","children","_s","allCoins","setAllCoins","savedData","setSavedData","currency","sortBy","saveCoin","coinId","oldCoins","JSON","parse","localStorage","getItem","includes","newCoin","setItem","stringify","removeCoin","filter","coin","getSavedData","totalCoins","data","fetch","join","then","res","json","error","console","log","resetSavedResult","length","isThere","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["G:/WebD/CryptoBucks-Final-Code/src/context/StorageContext.js"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\nimport {\r\n  createContext,\r\n  useContext,\r\n  useEffect,\r\n  useLayoutEffect,\r\n  useState,\r\n} from \"react\";\r\nimport { CryptoContext } from \"./CryptoContext\";\r\n\r\n// create context object\r\nexport const StorageContext = createContext({});\r\n\r\n// create the provider component\r\nexport const StorageProvider = ({ children }) => {\r\n  const [allCoins, setAllCoins] = useState([]);\r\n  const [savedData, setSavedData] = useState();\r\n\r\n  let { currency, sortBy } = useContext(CryptoContext);\r\n\r\n  const saveCoin = (coinId) => {\r\n    let oldCoins = JSON.parse(localStorage.getItem(\"coins\"));\r\n\r\n    if (oldCoins.includes(coinId)) {\r\n      return null;\r\n    } else {\r\n      let newCoin = [...oldCoins, coinId];\r\n      setAllCoins(newCoin);\r\n      localStorage.setItem(\"coins\", JSON.stringify(newCoin));\r\n    }\r\n  };\r\n\r\n  const removeCoin = (coinId) => {\r\n    let oldCoins = JSON.parse(localStorage.getItem(\"coins\"));\r\n\r\n    let newCoin = oldCoins.filter((coin) => coin !== coinId);\r\n\r\n    setAllCoins(newCoin);\r\n    localStorage.setItem(\"coins\", JSON.stringify(newCoin));\r\n  };\r\n\r\n  const getSavedData = async (totalCoins = allCoins) => {\r\n    try {\r\n      const data = await fetch(\r\n        `https://api.coingecko.com/api/v3/coins/markets?vs_currency=${currency}&ids=${totalCoins.join(\r\n          \",\"\r\n        )}&order=${sortBy}&sparkline=false&price_change_percentage=1h%2C24h%2C7d`\r\n      )\r\n        .then((res) => res.json())\r\n        .then((json) => json);\r\n\r\n      // console.log(data);\r\n      setSavedData(data);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const resetSavedResult = () => {\r\n    getSavedData();\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (allCoins.length > 0) {\r\n      getSavedData(allCoins);\r\n    } else {\r\n      setSavedData();\r\n    }\r\n  }, [allCoins]);\r\n\r\n  useLayoutEffect(() => {\r\n    let isThere = JSON.parse(localStorage.getItem(\"coins\")) || false;\r\n\r\n    if (!isThere) {\r\n      //set the localstorage with empty array\r\n      localStorage.setItem(\"coins\", JSON.stringify([]));\r\n    } else {\r\n      //set the state with the current values from the local storage\r\n      let totalCoins = JSON.parse(localStorage.getItem(\"coins\"));\r\n      setAllCoins(totalCoins);\r\n\r\n      if (totalCoins.length > 0) {\r\n        getSavedData(totalCoins);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <StorageContext.Provider\r\n      value={{\r\n        saveCoin,\r\n        allCoins,\r\n        removeCoin,\r\n        savedData,\r\n        resetSavedResult,\r\n      }}\r\n    >\r\n      {children}\r\n    </StorageContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}